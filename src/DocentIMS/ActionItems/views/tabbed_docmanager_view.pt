<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n" i18n:domain="My.Addon" metal:use-macro="context/main_template/macros/master">
  <body>
    <metal:content-core fill-slot="content-core">
      <metal:block define-macro="content-core">

        <div class="white-background">
          <!-- first tab -->

          <div class="pat-autotoc autotabs" data-pat-autotoc="section:fieldset;levels:legend;">

            <!-- Show all Document types as separate tabs document_type=-->
            <!-- ${items} -->

            <fieldset tal:repeat="doctypes python: view.grouped_items_by_document_type()">
              <legend>${python: doctypes['document_type']}</legend >


              <table class="listing pat-datatables listing" data-pat-datatables="pageLength: 50">
                <thead>
                  <tr>
                    <th>Title </th>
                    <th>Creator</th>
                    <th>Type</th>
                    <th>Modified </th>
                    <th>Download</th>
                    <th>View</th>
                  </tr>
                </thead>
                <tbody>
                  <tr tal:repeat="item python: doctypes['items']">
                    <td>
                      <a href="${item/absolute_url}">${item/Title}</a>
                    </td>
                    <td>${item/Creator}</td>
                    <td>${item/Type}</td>
                    <td>
                      <time class="pat-display-time" datetime="${python:context.modified().ISO()}" data-pat-display-time="output-format: Do MMMM YYYY">
                           ${item/modified}
                      </time>
                    </td>
                    <td>
                      <tal:condition tal:condition="item/file|None">

                        <tal:define tal:define="
                            filename item/file/filename;
                            extension python:filename.split('.')[-1];                            
                        ">
                          <img src="++plone++DocentIMS.ActionItems/${extension}_icon.jpg" alt="${extension}-icon" width="25" height="25"/> 
                          
                        <a href="${item/absolute_url}/@@download/file">${filename}</a>
                        </tal:define>
                      </tal:condition>
                    </td>
                    <td>
                      <tal:condition tal:condition="item/file|None">
                        <img src="++plone++DocentIMS.ActionItems/icons/eye.svg" alt="view icon" width="25" height="25"/>  
                        <a alt="Open in Only Office" title="View" href="${item/absolute_url}/onlyoffice-view-file">View</a>
                      </tal:condition>
                    </td>
                  </tr>
                </tbody>
              </table>
            </fieldset>
          </div>
        </div>
      </metal:block>
    </metal:content-core>
  </body>
</html>



    